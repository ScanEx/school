!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function l(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function i(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function g(){return f(" ")}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function p(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function y(t,e,n){t.classList[n?"add":"remove"](e)}let $;function _(t){$=t}function v(){if(!$)throw new Error("Function called outside component initialization");return $}function x(){const t=v();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const l=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);r.slice().forEach(e=>{e.call(t,l)})}}}const w=[],b=[],k=[],C=[],E=Promise.resolve();let A=!1;function I(t){k.push(t)}function N(t){C.push(t)}function S(){const t=new Set;do{for(;w.length;){const t=w.shift();_(t),j(t.$$)}for(;b.length;)b.pop()();for(let e=0;e<k.length;e+=1){const n=k[e];t.has(n)||(n(),t.add(n))}k.length=0}while(w.length);for(;C.length;)C.pop()();A=!1}function j(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(I)}}const O=new Set;function q(t,e){t&&t.i&&(O.delete(t),t.i(e))}function L(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}function M(t,n,o){const{fragment:s,on_mount:i,on_destroy:c,after_update:u}=t.$$;s&&s.m(n,o),I(()=>{const n=i.map(e).filter(l);c?c.push(...n):r(n),t.$$.on_mount=[]}),u.forEach(I)}function B(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&(w.push(t),A||(A=!0,E.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(e,l,o,s,i,c,u=[-1]){const a=$;_(e);const f=l.props||{},g=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:u};let d=!1;g.ctx=o?o(e,f,(t,n,...r)=>{const l=r.length?r[0]:n;return g.ctx&&i(g.ctx[t],g.ctx[t]=l)&&(g.bound[t]&&g.bound[t](l),d&&D(e,t)),n}):[],g.update(),d=!0,r(g.before_update),g.fragment=!!s&&s(g.ctx),l.target&&(l.hydrate?g.fragment&&g.fragment.l(function(t){return Array.from(t.childNodes)}(l.target)):g.fragment&&g.fragment.c(),l.intro&&q(e.$$.fragment),M(e,l.target,l.anchor),S()),_(a)}class P{$destroy(){B(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function R(e){let n,l,o,u,y,$,_,v,x,w,b,k,C,E,A,I;return{c(){n=a("div"),l=a("label"),l.textContent="1",o=g(),u=a("i"),y=g(),$=a("i"),_=g(),v=a("input"),x=g(),w=a("i"),b=g(),k=a("i"),C=g(),E=a("label"),A=f(e[0]),h(u,"class","icon fast-backward"),h($,"class","icon backward"),h(v,"class","current"),h(v,"type","text"),v.value=e[1],h(w,"class","icon forward"),h(k,"class","icon fast-forward"),h(n,"class","pager")},m(t,r){i(t,n,r),s(n,l),s(n,o),s(n,u),s(n,y),s(n,$),s(n,_),s(n,v),s(n,x),s(n,w),s(n,b),s(n,k),s(n,C),s(n,E),s(E,A),I=[d(u,"click",p(e[2])),d($,"click",p(e[3])),d(v,"change",p(e[6])),d(w,"click",p(e[4])),d(k,"click",p(e[5]))]},p(t,[e]){2&e&&v.value!==t[1]&&(v.value=t[1]),1&e&&m(A,t[0])},i:t,o:t,d(t){t&&c(n),r(I)}}}function z(t,e,n){const r=x();let{max:l=0}=e,{current:o=0}=e;let s=0,i=0;return t.$set=t=>{"max"in t&&n(0,l=t.max),"current"in t&&n(1,o=t.current)},t.$$.update=()=>{387&t.$$.dirty&&(Number.isInteger(l)&&1<=l?n(8,i=l):n(0,l=i),Number.isInteger(o)&&1<=o&&o<=l?(n(7,s=o),r("change",s)):n(1,o=s))},[l,o,function(){n(1,o=1)},function(){n(1,--o)},function(){n(1,++o)},function(){n(1,o=l)},function({target:t}){n(1,o=parseInt(t.value,10))}]}class F extends P{constructor(t){super(),H(this,t,z,R,o,{max:0,current:1,start:2,backward:3,forward:4,end:5})}get start(){return this.$$.ctx[2]}get backward(){return this.$$.ctx[3]}get forward(){return this.$$.ctx[4]}get end(){return this.$$.ctx[5]}}function T(t,e,n){const r=t.slice();return r[28]=e[n],r[30]=n,r}function G(t,e,n){const r=t.slice();return r[25]=e[n],r[27]=n,r}function J(t,e,n){const r=t.slice();return r[31]=e[n],r}function K(t,e,n){const r=t.slice();return r[34]=e[n].title,r[27]=n,r}function Q(t,e,n){const r=t.slice();return r[31]=e[n],r}function U(t){let e;return{c(){e=a("col")},m(t,n){i(t,e,n)},d(t){t&&c(e)}}}function V(t){let e,n,r=t[34]+"";return{c(){e=a("td"),n=f(r)},m(t,r){i(t,e,r),s(e,n)},p(t,e){16&e[0]&&r!==(r=t[34]+"")&&m(n,r)},d(t){t&&c(e)}}}function W(t){let e,n,r,l,o,f=t[4],d=[];for(let e=0;e<f.length;e+=1)d[e]=X(J(t,f,e));let p=t[2],m=[];for(let e=0;e<p.length;e+=1)m[e]=et(G(t,p,e));return{c(){e=a("div"),n=a("table"),r=a("colgroup");for(let t=0;t<d.length;t+=1)d[t].c();l=g(),o=a("tbody");for(let t=0;t<m.length;t+=1)m[t].c();h(n,"cellspacing","0"),h(n,"cellpadding","0"),h(e,"class","content")},m(c,u){i(c,e,u),s(e,n),s(n,r);for(let t=0;t<d.length;t+=1)d[t].m(r,null);t[20](r),s(n,l),s(n,o);for(let t=0;t<m.length;t+=1)m[t].m(o,null);t[21](o)},p(t,e){if(16&e[0]){const e=f.length;let n;for(f=t[4],n=e;n<f.length;n+=1){J(t,f,n);d[n]||(d[n]=X(),d[n].c(),d[n].m(r,null))}for(n=f.length;n<e;n+=1)d[n].d(1);d.length=f.length}if(1076&e[0]){let n;for(p=t[2],n=0;n<p.length;n+=1){const r=G(t,p,n);m[n]?m[n].p(r,e):(m[n]=et(r),m[n].c(),m[n].m(o,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=p.length}},d(n){n&&c(e),u(d,n),t[20](null),u(m,n),t[21](null)}}}function X(t){let e;return{c(){e=a("col")},m(t,n){i(t,e,n)},d(t){t&&c(e)}}}function Y(t){let e,n,r=t[10](t[25][t[28]],t[30])+"";return{c(){e=a("td"),n=f(r)},m(t,r){i(t,e,r),s(e,n)},p(t,e){36&e[0]&&r!==(r=t[10](t[25][t[28]],t[30])+"")&&m(n,r)},d(t){t&&c(e)}}}function Z(t){let e,n,r,l=t[10](t[25][t[28]],t[30])+"";return{c(){e=a("td"),n=f(l),h(e,"style",r=t[4][t[30]].style)},m(t,r){i(t,e,r),s(e,n)},p(t,o){36&o[0]&&l!==(l=t[10](t[25][t[28]],t[30])+"")&&m(n,l),16&o[0]&&r!==(r=t[4][t[30]].style)&&h(e,"style",r)},d(t){t&&c(e)}}}function tt(t){let e;function n(t,e){return"string"==typeof t[4][t[30]].style?Z:Y}let r=n(t),l=r(t);return{c(){l.c(),e=f("")},m(t,n){l.m(t,n),i(t,e,n)},p(t,o){r===(r=n(t))&&l?l.p(t,o):(l.d(1),l=r(t),l&&(l.c(),l.m(e.parentNode,e)))},d(t){l.d(t),t&&c(e)}}}function et(t){let e,n,r=t[5],l=[];for(let e=0;e<r.length;e+=1)l[e]=tt(T(t,r,e));return{c(){e=a("tr");for(let t=0;t<l.length;t+=1)l[t].c();n=g(),y(e,"odd",t[27]%2==0),y(e,"even",t[27]%2!=0)},m(t,r){i(t,e,r);for(let t=0;t<l.length;t+=1)l[t].m(e,null);s(e,n)},p(t,o){if(1076&o[0]){let s;for(r=t[5],s=0;s<r.length;s+=1){const i=T(t,r,s);l[s]?l[s].p(i,o):(l[s]=tt(i),l[s].c(),l[s].m(e,n))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(t){t&&c(e),u(l,t)}}}function nt(t){let e,n,r,l,o,f,d,p,m,$,_,v,x,w,k,C=Array.isArray(t[2])&&t[2].length>0,E=t[4],A=[];for(let e=0;e<E.length;e+=1)A[e]=U(Q(t,E,e));let I=t[4],S=[];for(let e=0;e<I.length;e+=1)S[e]=V(K(t,I,e));let j=C&&W(t);function D(e){t[22].call(null,e)}function H(e){t[23].call(null,e)}let P={};void 0!==t[0]&&(P.current=t[0]),void 0!==t[1]&&(P.max=t[1]);const R=new F({props:P});return b.push(()=>L(R,"current",D)),b.push(()=>L(R,"max",H)),R.$on("change",t[24]),{c(){e=a("div"),n=a("div"),r=a("table"),l=a("colgroup");for(let t=0;t<A.length;t+=1)A[t].c();o=g(),f=a("tbody"),d=a("tr");for(let t=0;t<S.length;t+=1)S[t].c();var s;p=g(),j&&j.c(),m=g(),$=a("div"),_=a("i"),v=g(),(s=R.$$.fragment)&&s.c(),h(r,"cellspacing","0"),h(r,"cellpadding","0"),h(n,"class","header"),h(_,"class","status"),y(_,"check-circle","success"===t[3]),y(_,"loading","waiting"===t[3]),y(_,"exclamation-circle","error"===t[3]),y(_,"none","none"===t[3]),h($,"class","footer"),h(e,"class","grid")},m(c,u){i(c,e,u),s(e,n),s(n,r),s(r,l);for(let t=0;t<A.length;t+=1)A[t].m(l,null);t[18](l),s(r,o),s(r,f),s(f,d);for(let t=0;t<S.length;t+=1)S[t].m(d,null);t[19](f),s(e,p),j&&j.m(e,null),s(e,m),s(e,$),s($,_),s($,v),M(R,$,null),k=!0},p(t,n){if(16&n[0]){const e=E.length;let n;for(E=t[4],n=e;n<E.length;n+=1){Q(t,E,n);A[n]||(A[n]=U(),A[n].c(),A[n].m(l,null))}for(n=E.length;n<e;n+=1)A[n].d(1);A.length=E.length}if(16&n[0]){let e;for(I=t[4],e=0;e<I.length;e+=1){const r=K(t,I,e);S[e]?S[e].p(r,n):(S[e]=V(r),S[e].c(),S[e].m(d,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=I.length}4&n[0]&&(C=Array.isArray(t[2])&&t[2].length>0),C?j?j.p(t,n):(j=W(t),j.c(),j.m(e,m)):j&&(j.d(1),j=null),8&n[0]&&y(_,"check-circle","success"===t[3]),8&n[0]&&y(_,"loading","waiting"===t[3]),8&n[0]&&y(_,"exclamation-circle","error"===t[3]),8&n[0]&&y(_,"none","none"===t[3]);const r={};!x&&1&n[0]&&(x=!0,r.current=t[0],N(()=>x=!1)),!w&&2&n[0]&&(w=!0,r.max=t[1],N(()=>w=!1)),R.$set(r)},i(t){k||(q(R.$$.fragment,t),k=!0)},o(t){!function(t,e,n,r){if(t&&t.o){if(O.has(t))return;O.add(t),(void 0).c.push(()=>{O.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}(R.$$.fragment,t),k=!1},d(n){n&&c(e),u(A,n),t[18](null),u(S,n),t[19](null),j&&j.d(),B(R)}}}function rt(t,e,n){let r,l,o,s,{page:i}=e,{pages:c=1}=e,{rows:u=[]}=e,{status:a="waiting"}=e,{columns:f={}}=e,{visibleColumns:g=[]}=e,{formatters:d={date:t=>{const e=/(?<d>\d\d)\/(?<m>\d\d)\/(?<y>\d\d\d\d)\s(?<H>\d\d?):(?<M>\d\d?)/g.exec(t);if(e&&e.groups){const t=parseInt(e.groups.y,10),n=parseInt(e.groups.m,10)-1,r=parseInt(e.groups.d,10),l=parseInt(e.groups.H,10),o=parseInt(e.groups.M,10);return new Date(t,n,r,l,o).toLocaleDateString()}return t}}}=e,p=[],h=[];var m;return m=()=>{if(r&&l&&o&&s){const t=l.querySelector("tr"),e=s.querySelector("tr");for(let l=0;l<e.children.length;++l){const s=e.children[l].getBoundingClientRect(),i=t.children[l].getBoundingClientRect(),c=s.width>i.width?s.width:i.width;n(6,r.children[l].style.width=`${c}px`,r),n(8,o.children[l].style.width=`${c}px`,o)}}},v().$$.after_update.push(m),t.$set=t=>{"page"in t&&n(0,i=t.page),"pages"in t&&n(1,c=t.pages),"rows"in t&&n(2,u=t.rows),"status"in t&&n(3,a=t.status),"columns"in t&&n(11,f=t.columns),"visibleColumns"in t&&n(12,g=t.visibleColumns),"formatters"in t&&n(13,d=t.formatters)},t.$$.update=()=>{if(6192&t.$$.dirty[0]){n(4,p=[]),n(5,h=[]);const t=Object.keys(f);for(let e=0;e<t.length;++e){let n=t[e];-1!=g.indexOf(n)&&(h.push(e),p.push(f[n]))}}},[i,c,u,a,p,h,r,l,o,s,function(t,e){const{type:n,formatter:r}=p[e],l=d[n];return"function"==typeof r?r(t):"function"==typeof l?l(t):t},f,g,d,function(){n(0,i=1)},function(){n(0,--i)},function(){n(0,++i)},function(){n(0,i=c)},function(t){b[t?"unshift":"push"](()=>{n(6,r=t)})},function(t){b[t?"unshift":"push"](()=>{n(7,l=t)})},function(t){b[t?"unshift":"push"](()=>{n(8,o=t)})},function(t){b[t?"unshift":"push"](()=>{n(9,s=t)})},function(t){i=t,n(0,i)},function(t){c=t,n(1,c)},function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}(t,e)}]}class lt extends P{constructor(t){super(),H(this,t,rt,nt,o,{page:0,pages:1,rows:2,status:3,columns:11,visibleColumns:12,formatters:13,start:14,backward:15,forward:16,end:17},[-1,-1])}get start(){return this.$$.ctx[14]}get backward(){return this.$$.ctx[15]}get forward(){return this.$$.ctx[16]}get end(){return this.$$.ctx[17]}}var ot={id:{type:"integer",title:"id"},mmsi:{type:"integer",title:"mmsi"},imo:{type:"integer",title:"imo"},vessel_name:{type:"string",title:"Название"},callsign:{type:"string",title:"Радиопозывной"},vessel_type:{type:"string",title:"Тип"},vessel_type_code:{type:"integer",title:"vessel_type_code"},vessel_type_cargo:{type:"string",title:"vessel_type_cargo"},vessel_class:{type:"string",title:"vessel_class"},length:{type:"integer",title:"length"},width:{type:"integer",title:"width"},flag_country:{type:"string",title:"Флаг"},flag_code:{type:"integer",title:"flag_code"},destination:{type:"string",title:"Пункт назначения"},eta:{type:"string",title:"Время прибытия"},draught:{type:"float",title:"draught"},longitude:{type:"float",title:"Долгота"},latitude:{type:"float",title:"Широта"},sog:{type:"float",title:"Скорость",style:"text-align: right"},cog:{type:"float",title:"Курс",style:"text-align: right"},rot:{type:"float",title:"Угловая скорость поворота",style:"text-align: right"},heading:{type:"integer",title:"Путевой угол",style:"text-align: right"},nav_status:{type:"string",title:"nav_status"},nav_status_code:{type:"integer",title:"nav_status_code"},source:{type:"string",title:"source"},ts_pos_utc:{type:"date",title:"ts_pos_utc"},ts_static_utc:{type:"date",title:"ts_static_utc"},ts_eta:{type:"date",title:"ts_eta"},ts_insert_utc:{type:"date",title:"ts_insert_utc"},registry_name:{type:"string",title:"registry_name"},registry_name_en:{type:"string",title:"registry_name_en"},vessel_type_main:{type:"string",title:"vessel_type_main"},vessel_type_sub:{type:"string",title:"vessel_type_sub"},message_type:{type:"integer",title:"message_type"}};window.onload=function(){const t=document.querySelector("#app"),e=new lt({target:t,props:{visibleColumns:["vessel_name","vessel_type","callsign","flag_country","destination","eta","heading","sog","cog"],columns:ot}});e.$on("change",({detail:t})=>{const n=50*(t-1);e.$set({status:"waiting"}),fetch(`/ais/50/${n}`).then(t=>t.json()).then(({count:t,rows:n})=>{const r=n.map(t=>Object.keys(t).map(e=>t[e]));e.$set({rows:r,pages:Math.ceil(t/50),status:"success"})}).catch(t=>{e.$set({status:"error"})})}),e.start()}}();
//# sourceMappingURL=main.js.map

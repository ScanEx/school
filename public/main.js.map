{"version":3,"file":"main.js","sources":["../node_modules/scanex-event-target/dist/scanex-event-target.cjs.js","../src/grid/Pager.js","../src/grid/Grid.js","../src/index.js"],"sourcesContent":["'use strict';\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n  if (!(instance instanceof Constructor)) {\r\n    throw new TypeError(\"Cannot call a class as a function\");\r\n  }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n  for (var i = 0; i < props.length; i++) {\r\n    var descriptor = props[i];\r\n    descriptor.enumerable = descriptor.enumerable || false;\r\n    descriptor.configurable = true;\r\n    if (\"value\" in descriptor) descriptor.writable = true;\r\n    Object.defineProperty(target, descriptor.key, descriptor);\r\n  }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n  if (staticProps) _defineProperties(Constructor, staticProps);\r\n  return Constructor;\r\n}\r\n\r\nvar EventTarget =\r\n/*#__PURE__*/\r\nfunction () {\r\n  function EventTarget() {\r\n    _classCallCheck(this, EventTarget);\r\n\r\n    this.listeners = {};\r\n  }\r\n\r\n  _createClass(EventTarget, [{\r\n    key: \"addEventListener\",\r\n    value: function addEventListener(type, callback) {\r\n      if (!(type in this.listeners)) {\r\n        this.listeners[type] = [];\r\n      }\r\n\r\n      this.listeners[type].push(callback);\r\n    }\r\n  }, {\r\n    key: \"on\",\r\n    value: function on(type, callback) {\r\n      this.addEventListener(type, callback);\r\n      return this;\r\n    }\r\n  }, {\r\n    key: \"removeEventListener\",\r\n    value: function removeEventListener(type, callback) {\r\n      if (!(type in this.listeners)) {\r\n        return;\r\n      }\r\n\r\n      var stack = this.listeners[type];\r\n\r\n      for (var i = 0, l = stack.length; i < l; i++) {\r\n        if (stack[i] === callback) {\r\n          stack.splice(i, 1);\r\n          return this.removeEventListener(type, callback);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: \"off\",\r\n    value: function off(type, callback) {\r\n      this.removeEventListener(type, callback);\r\n      return this;\r\n    }\r\n  }, {\r\n    key: \"dispatchEvent\",\r\n    value: function dispatchEvent(event) {\r\n      if (!(event.type in this.listeners)) {\r\n        return;\r\n      }\r\n\r\n      var stack = this.listeners[event.type];\r\n      Object.defineProperty(event, 'target', {\r\n        enumerable: false,\r\n        configurable: false,\r\n        writable: false,\r\n        value: this\r\n      });\r\n\r\n      for (var i = 0, l = stack.length; i < l; i++) {\r\n        stack[i].call(this, event);\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventTarget;\r\n}();\r\n\r\nmodule.exports = EventTarget;\r\n","import EventTarget from 'scanex-event-target';\r\nimport './Pager.css';\r\n\r\nclass Pager extends EventTarget {\r\n    constructor(container, options) {\r\n        super();\r\n        this._container = container;\r\n        this._options = options || {};\r\n        this._max = this._options.max || 1;\r\n        this._current = this._options.current || 1;\r\n\r\n        this._container.innerHTML =\r\n            `<div class=\"pager\">\r\n                <i class=\"icon fast-backward\"></i>\r\n                <i class=\"icon backward\"></i>\r\n                <input class=\"current\" type=\"text\" value=\"${this._current.toString()}\">\r\n                <i class=\"icon forward\"></i>\r\n                <i class=\"icon fast-forward\"></i>\r\n            </div>`;\r\n        this._input = this._container.querySelector('.current');\r\n        this._input.addEventListener('change', this.choose.bind(this));\r\n\r\n        const buttons = this._container.querySelectorAll('.icon');\r\n        buttons[0].addEventListener('click', this.start.bind(this));\r\n        buttons[1].addEventListener('click', this.back.bind(this));\r\n        buttons[2].addEventListener('click', this.forward.bind(this));\r\n        buttons[3].addEventListener('click', this.end.bind(this));    \r\n    }\r\n    get current () {\r\n        return this._current;\r\n    }\r\n    set current (c) {\r\n        if (!isNaN(c) && 1 <= c && c <= this._max) {\r\n            this._current = c;\r\n            this._input.value = this._current.toString();\r\n            this._change();\r\n        }        \r\n    }\r\n    _change () {\r\n        let event = document.createEvent('Event');\r\n        event.initEvent('change', false, false);\r\n        event.detail = this.current;\r\n        this.dispatchEvent(event);\r\n    }\r\n    forward () {        \r\n        this.current += 1;\r\n    }\r\n    back () {\r\n        this.current -= 1;\r\n    }\r\n    start () {\r\n        this.current = 1;        \r\n    }\r\n    end () {\r\n        this.current = this._max;        \r\n    }\r\n    choose () {        \r\n        this.current = parseInt(this._input.value, 10);\r\n        this._input.value = this.current.toString();\r\n    }\r\n}\r\n\r\nexport default Pager;","import Pager from './Pager.js';\r\nimport './Grid.css';\r\n\r\nclass Grid {\r\n    constructor(container, options, onChange) {\r\n        this._container = container;\r\n        this._options = options || {};\r\n    \r\n        this._container.innerHTML = \r\n            `<table class=\"scanex-school grid\">\r\n                <tr><td class=\"content\"></td></tr>\r\n                <tr><td class=\"footer\"></td></tr>\r\n            </table>`;\r\n    \r\n        this._content = this._container.querySelector('.content');\r\n        this._footer = this._container.querySelector('.footer');\r\n    \r\n        const cks = Object.keys(this._options.columns);\r\n        this._visibleColumns = [];\r\n        this._columns = [];\r\n        for (let i = 0; i < cks.length; ++i) {\r\n            let k = cks[i];\r\n            if (this._options.visibleColumns.indexOf(k) != -1) {\r\n                this._visibleColumns.push(i);\r\n                this._columns.push(this._options.columns[k]);\r\n            }\r\n        }\r\n    \r\n        this._current = 1; // текущая страница\r\n        this._pageSize = this._options.pageSize || 1; // элементов на странице\r\n        this._pages = this._options.pages || 1;\r\n        this._onChange = onChange;\r\n    \r\n        this._pager = new Pager(this._footer, {max: this._pages, current: this._current});\r\n        this._pager.addEventListener('change', e => this.page = e.detail);\r\n    \r\n        this.page = this._current;\r\n    }\r\n    get page () {\r\n        return this._current;\r\n    }\r\n    set page (p) {\r\n        if(!isNaN(p) && 1 <= p && p <= this._pages) {\r\n            this._current = p;\r\n            if (typeof (this._onChange) === 'function') {\r\n                const rows = this._onChange (p, this._pageSize);\r\n                this._render(rows);\r\n            }\r\n        }\r\n    }\r\n    _render (rows) {\r\n        if (Array.isArray(rows) && rows.length > 0) {            \r\n            this._content.innerHTML = `<table>\r\n                <thead>\r\n                    <tr>${this._columns.map(({title}) => `<th>${title}</th>`).join('')}</tr>\r\n                </thead>\r\n                <tbody>\r\n                ${rows.map((row, i) => {\r\n                    return `<tr class=\"${i % 2 === 0 ? 'odd' : 'even'}\">${this._visibleColumns.map(column => {\r\n                        return `<td>${row[column]}</td>`;\r\n                    }).join('')}</tr>`;\r\n                }).join('')}\r\n                </tbody>\r\n            </table>`;\r\n        }\r\n        else {\r\n            this._content.innerHTML = '';\r\n        }\r\n    }\r\n    start() {\r\n        this._pager.start();\r\n    }\r\n    forward () {\r\n        this._pager.forward();\r\n    }\r\n    back () {\r\n        this._pager.back();\r\n    }\r\n    end () {\r\n        this._pager.end();\r\n    }\r\n}\r\n\r\nexport default Grid;","import Grid from './grid/Grid.js';\r\nimport './icons.css';\r\n\r\n// var DB = require ('./db.js');\r\n// var COLUMNS = require('./columns.js');\r\n\r\nwindow.onload = function () {\r\n    const container = document.querySelector('#app');\r\n    let options = {\r\n        pageSize: 25,\r\n        visibleColumns: ['VesselID', 'ObservationID', 'IcePassage#', 'RecordMSK', 'RecordUTC'],\r\n        columns: COLUMNS,\r\n    };\r\n    options.pages = Math.ceil (DB.length / options.pageSize);\r\n    const grid = new Grid(container, options, (index, pageSize) => {\r\n        const start = (index - 1) * pageSize;\r\n        const end = index * pageSize;\r\n        return DB.slice(start, end);\r\n    });\r\n}"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","EventTarget","instance","Constructor","TypeError","_classCallCheck","this","listeners","protoProps","staticProps","value","type","callback","push","addEventListener","stack","l","splice","removeEventListener","event","call","prototype","Pager","constructor","container","options","_container","_options","_max","max","_current","current","innerHTML","toString","_input","querySelector","choose","bind","buttons","querySelectorAll","start","back","forward","end","c","isNaN","_change","document","createEvent","initEvent","detail","dispatchEvent","parseInt","Grid","onChange","_content","_footer","cks","keys","columns","_visibleColumns","_columns","k","visibleColumns","indexOf","_pageSize","pageSize","_pages","pages","_onChange","_pager","e","page","p","rows","_render","Array","isArray","map","title","join","row","column","window","onload","COLUMNS","Math","ceil","DB","index","slice"],"mappings":"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"}
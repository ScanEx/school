{"version":3,"file":"main.js","sources":["../node_modules/scanex-event-target/dist/scanex-event-target.cjs.js","../src/grid/Pager.js","../src/grid/Grid.js","../src/index.js"],"sourcesContent":["'use strict';\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n  if (!(instance instanceof Constructor)) {\r\n    throw new TypeError(\"Cannot call a class as a function\");\r\n  }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n  for (var i = 0; i < props.length; i++) {\r\n    var descriptor = props[i];\r\n    descriptor.enumerable = descriptor.enumerable || false;\r\n    descriptor.configurable = true;\r\n    if (\"value\" in descriptor) descriptor.writable = true;\r\n    Object.defineProperty(target, descriptor.key, descriptor);\r\n  }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n  if (staticProps) _defineProperties(Constructor, staticProps);\r\n  return Constructor;\r\n}\r\n\r\nvar EventTarget =\r\n/*#__PURE__*/\r\nfunction () {\r\n  function EventTarget() {\r\n    _classCallCheck(this, EventTarget);\r\n\r\n    this.listeners = {};\r\n  }\r\n\r\n  _createClass(EventTarget, [{\r\n    key: \"addEventListener\",\r\n    value: function addEventListener(type, callback) {\r\n      if (!(type in this.listeners)) {\r\n        this.listeners[type] = [];\r\n      }\r\n\r\n      this.listeners[type].push(callback);\r\n    }\r\n  }, {\r\n    key: \"on\",\r\n    value: function on(type, callback) {\r\n      this.addEventListener(type, callback);\r\n      return this;\r\n    }\r\n  }, {\r\n    key: \"removeEventListener\",\r\n    value: function removeEventListener(type, callback) {\r\n      if (!(type in this.listeners)) {\r\n        return;\r\n      }\r\n\r\n      var stack = this.listeners[type];\r\n\r\n      for (var i = 0, l = stack.length; i < l; i++) {\r\n        if (stack[i] === callback) {\r\n          stack.splice(i, 1);\r\n          return this.removeEventListener(type, callback);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: \"off\",\r\n    value: function off(type, callback) {\r\n      this.removeEventListener(type, callback);\r\n      return this;\r\n    }\r\n  }, {\r\n    key: \"dispatchEvent\",\r\n    value: function dispatchEvent(event) {\r\n      if (!(event.type in this.listeners)) {\r\n        return;\r\n      }\r\n\r\n      var stack = this.listeners[event.type];\r\n      Object.defineProperty(event, 'target', {\r\n        enumerable: false,\r\n        configurable: false,\r\n        writable: false,\r\n        value: this\r\n      });\r\n\r\n      for (var i = 0, l = stack.length; i < l; i++) {\r\n        stack[i].call(this, event);\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventTarget;\r\n}();\r\n\r\nmodule.exports = EventTarget;\r\n","require ('./Pager.css');\r\n\r\nvar EventTarget = require('scanex-event-target');\r\n\r\nvar Pager = function (container, options) {\r\n    EventTarget.call(this); // вызов конструктора родительского объекта\r\n\r\n    this._container = container;\r\n    this._options = options || {};\r\n    this._max = this._options.max || 1;\r\n    this._current = this._options.current || 1;\r\n        \r\n    this._container.innerHTML =\r\n        '<div class=\"pager\">' +\r\n            '<span class=\"button\">&ll;</span>' +\r\n            '<span class=\"button\">&lt;</span>' +\r\n            '<span><input class=\"current\" type=\"text\" value=\"' + this._current.toString() + '\"></span>' +\r\n            '<span class=\"button\">&gt;</span>' +\r\n            '<span class=\"button\">&gg;</span>' +\r\n        '</div>';\r\n    this._input = this._container.querySelector('.current');\r\n    this._input.addEventListener('change', this.choose.bind(this));\r\n\r\n    var buttons = this._container.querySelectorAll('.button');\r\n    buttons[0].addEventListener('click', this.start.bind(this));\r\n    buttons[1].addEventListener('click', this.back.bind(this));\r\n    buttons[2].addEventListener('click', this.forward.bind(this));\r\n    buttons[3].addEventListener('click', this.end.bind(this));    \r\n}\r\n\r\nPager.prototype = Object.create(EventTarget.prototype);\r\n\r\nPager.prototype.constructor = Pager;\r\n\r\nPager.prototype._change = function() {\r\n    let event = document.createEvent('Event');\r\n    event.initEvent('change', false, false);\r\n    event.detail = this._current;\r\n    this.dispatchEvent(event);\r\n};\r\n\r\nPager.prototype.forward = function () {\r\n    this._current = this._current + 1 < this._max ? this._current + 1 : this._max;\r\n    this._input.value = this._current.toString();    \r\n    this._change();\r\n};\r\nPager.prototype.back = function () {\r\n    this._current = this._current - 1 > 0 ? this._current - 1 : 1;\r\n    this._input.value = this._current.toString();\r\n    this._change();\r\n};\r\nPager.prototype.start = function() {\r\n    this._current = 1;\r\n    this._input.value = this._current.toString();\r\n    this._change();    \r\n};\r\nPager.prototype.end = function () {\r\n    this._current = this._max;\r\n    this._input.value = this._current.toString();\r\n    this._change();\r\n};\r\nPager.prototype.choose = function () {\r\n    var input = Number(this._input.value);\r\n    if (!isNaN(input) && input > 0 && input <= this._max) {\r\n        this._current = input;\r\n    } else {\r\n        this._input.value = this._current.toString();\r\n    }\r\n    this._change();\r\n};\r\n\r\nmodule.exports = Pager;","var Pager = require ('./Pager.js');\r\n\r\nrequire ('./Grid.css');\r\n\r\nvar Grid = function(container, options, onChange) {\r\n    this._container = container;\r\n    this._options = options || {};\r\n\r\n    this._container.innerHTML = \r\n        '<table class=\"grid\">' +\r\n            '<tr><td class=\"content\"></td></tr>' +\r\n            '<tr><td class=\"footer\"></td></tr>' +\r\n        '</table>';\r\n\r\n    this._content = this._container.querySelector('.content');\r\n    this._footer = this._container.querySelector('.footer');\r\n\r\n    var cks = Object.keys(this._options.columns);\r\n    this._visibleColumns = [];\r\n    this._columns = [];\r\n    for (var i = 0; i < cks.length; ++i) {\r\n        var k = cks[i];\r\n        if (this._options.visibleColumns.indexOf(k) != -1) {\r\n            this._visibleColumns.push(i);\r\n            this._columns.push(this._options.columns[k]);\r\n        }\r\n    }\r\n\r\n    this._current = 1; // текущая страница\r\n    this._pageSize = this._options.pageSize || 1; // элементов на странице\r\n    this._pages = this._options.pages || 1;\r\n    this._onChange = onChange;\r\n\r\n    this._pager = new Pager(this._footer, {max: this._pages, current: this._current});\r\n    this._pager.addEventListener('change', function (e) {\r\n        this.setPage(e.detail);\r\n    }.bind(this));\r\n\r\n    this.setPage (this._current);\r\n};\r\n\r\nGrid.prototype = {\r\n\r\n    setPage: function (page) {\r\n        if (typeof (this._onChange) === 'function') {\r\n            var rows = this._onChange (page, this._pageSize);\r\n            this._render(rows);\r\n        }\r\n    },\r\n\r\n    _render: function (rows) {\r\n        if (Array.isArray(rows) && rows.length > 0) {\r\n            var t = '<table>';\r\n            t += '<thead><tr>' + this._columns.map(function(c) {\r\n                return '<th>' + c.title + '</th>';\r\n            }).join('') + '</tr></thead>';\r\n            t += '<tbody>';\r\n            for (var i = 0; i < rows.length; ++i) {\r\n                t += i % 2 !== 0 ? '<tr class=\"even\">' : '<tr>';\r\n                var cells = rows[i];\r\n                for (var j = 0; j < this._visibleColumns.length; ++j) {\r\n                    var k = this._visibleColumns[j];\r\n                    t += '<td>';\r\n                    t += cells[k];\r\n                    t += '</td>';\r\n                }\r\n                t += '</tr>';\r\n            }\r\n            t += '</tbody>';\r\n            t += '</table>';\r\n            this._content.innerHTML = t;\r\n        }\r\n        else {\r\n            this._content.innerHTML = '';\r\n        }\r\n    },\r\n\r\n    start: function() {\r\n        this._pager.start();\r\n    },\r\n\r\n    forward: function () {\r\n        this._pager.forward();\r\n    },\r\n\r\n    back: function () {\r\n        this._pager.back();\r\n    },\r\n\r\n    end: function () {\r\n        this._pager.end();\r\n    }\r\n\r\n};\r\n\r\nGrid.prototype.constructor = Grid;\r\n\r\nmodule.exports = Grid;","var Grid = require ('./grid/Grid.js');\r\n// var DB = require ('./db.js');\r\n// var COLUMNS = require('./columns.js');\r\n\r\nwindow.onload = function () {\r\n    var container = document.querySelector('#app');\r\n    var options = {\r\n        pageSize: 25,\r\n        visibleColumns: ['VesselID', 'ObservationID', 'IcePassage#', 'RecordMSK', 'RecordUTC'],\r\n        columns: COLUMNS,\r\n    };\r\n    options.pages = Math.ceil (DB.length / options.pageSize);\r\n    var grid = new Grid(container, options, function (index, pageSize) {\r\n        var start = (index - 1) * pageSize;\r\n        var end = index * pageSize;\r\n        return DB.slice(start, end);\r\n    });\r\n}"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","EventTarget","instance","Constructor","TypeError","_classCallCheck","this","listeners","protoProps","staticProps","value","type","callback","push","addEventListener","stack","l","splice","removeEventListener","event","call","prototype","Pager","container","options","_container","_options","_max","max","_current","current","innerHTML","toString","_input","querySelector","choose","bind","buttons","querySelectorAll","start","back","forward","end","create","constructor","_change","document","createEvent","initEvent","detail","dispatchEvent","input","Number","isNaN","Grid","onChange","_content","_footer","cks","keys","columns","_visibleColumns","_columns","k","visibleColumns","indexOf","_pageSize","pageSize","_pages","pages","_onChange","_pager","e","setPage","page","rows","_render","Array","isArray","t","map","c","title","join","cells","j","window","onload","COLUMNS","Math","ceil","DB","index","slice"],"mappings":"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"}
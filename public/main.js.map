{"version":3,"file":"main.js","sources":["../node_modules/scanex-event-target/dist/scanex-event-target.cjs.js","../src/grid/Pager.js","../src/grid/Grid.js","../src/index.js"],"sourcesContent":["'use strict';\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n  if (!(instance instanceof Constructor)) {\r\n    throw new TypeError(\"Cannot call a class as a function\");\r\n  }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n  for (var i = 0; i < props.length; i++) {\r\n    var descriptor = props[i];\r\n    descriptor.enumerable = descriptor.enumerable || false;\r\n    descriptor.configurable = true;\r\n    if (\"value\" in descriptor) descriptor.writable = true;\r\n    Object.defineProperty(target, descriptor.key, descriptor);\r\n  }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n  if (staticProps) _defineProperties(Constructor, staticProps);\r\n  return Constructor;\r\n}\r\n\r\nvar EventTarget =\r\n/*#__PURE__*/\r\nfunction () {\r\n  function EventTarget() {\r\n    _classCallCheck(this, EventTarget);\r\n\r\n    this.listeners = {};\r\n  }\r\n\r\n  _createClass(EventTarget, [{\r\n    key: \"addEventListener\",\r\n    value: function addEventListener(type, callback) {\r\n      if (!(type in this.listeners)) {\r\n        this.listeners[type] = [];\r\n      }\r\n\r\n      this.listeners[type].push(callback);\r\n    }\r\n  }, {\r\n    key: \"on\",\r\n    value: function on(type, callback) {\r\n      this.addEventListener(type, callback);\r\n      return this;\r\n    }\r\n  }, {\r\n    key: \"removeEventListener\",\r\n    value: function removeEventListener(type, callback) {\r\n      if (!(type in this.listeners)) {\r\n        return;\r\n      }\r\n\r\n      var stack = this.listeners[type];\r\n\r\n      for (var i = 0, l = stack.length; i < l; i++) {\r\n        if (stack[i] === callback) {\r\n          stack.splice(i, 1);\r\n          return this.removeEventListener(type, callback);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: \"off\",\r\n    value: function off(type, callback) {\r\n      this.removeEventListener(type, callback);\r\n      return this;\r\n    }\r\n  }, {\r\n    key: \"dispatchEvent\",\r\n    value: function dispatchEvent(event) {\r\n      if (!(event.type in this.listeners)) {\r\n        return;\r\n      }\r\n\r\n      var stack = this.listeners[event.type];\r\n      Object.defineProperty(event, 'target', {\r\n        enumerable: false,\r\n        configurable: false,\r\n        writable: false,\r\n        value: this\r\n      });\r\n\r\n      for (var i = 0, l = stack.length; i < l; i++) {\r\n        stack[i].call(this, event);\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventTarget;\r\n}();\r\n\r\nmodule.exports = EventTarget;\r\n","import EventTarget from 'scanex-event-target';\r\nimport './Pager.css';\r\n\r\nclass Pager extends EventTarget {\r\n    constructor(container, options) {\r\n        super();\r\n        this._container = container;\r\n        this._options = options || {};\r\n        this._max = this._options.max || 1;        \r\n        this._container.innerHTML =\r\n            `<div class=\"pager\">\r\n                <i class=\"icon fast-backward\"></i>\r\n                <i class=\"icon backward\"></i>\r\n                <input class=\"current\" type=\"text\" value=\"\">\r\n                <i class=\"icon forward\"></i>\r\n                <i class=\"icon fast-forward\"></i>\r\n            </div>`;\r\n        this._input = this._container.querySelector('.current');\r\n        this._input.addEventListener('change', this.choose.bind(this));\r\n\r\n        const buttons = this._container.querySelectorAll('.icon');\r\n        buttons[0].addEventListener('click', this.start.bind(this));\r\n        buttons[1].addEventListener('click', this.back.bind(this));\r\n        buttons[2].addEventListener('click', this.forward.bind(this));\r\n        buttons[3].addEventListener('click', this.end.bind(this));\r\n    }\r\n    get current () {\r\n        return this._current;\r\n    }\r\n    set current (c) {        \r\n        if (!isNaN(c) && 1 <= c && c <= this._max) {\r\n            this._current = c;\r\n            this._input.value = this._current.toString();\r\n            let event = document.createEvent('Event');\r\n            event.initEvent('change', false, false);\r\n            event.detail = this._current;\r\n            this.dispatchEvent(event);\r\n        }\r\n        else {\r\n            this._input.value = this._current.toString();\r\n        }         \r\n    }    \r\n    forward () {        \r\n        this.current += 1;\r\n    }\r\n    back () {\r\n        this.current -= 1;\r\n    }\r\n    start () {\r\n        this.current = 1;        \r\n    }\r\n    end () {\r\n        this.current = this._max;        \r\n    }\r\n    choose () {        \r\n        this.current = parseInt(this._input.value, 10);\r\n    }\r\n}\r\n\r\nexport default Pager;","import Pager from './Pager.js';\r\nimport './Grid.css';\r\n\r\nclass Grid {\r\n    constructor(container, options, onChange) {\r\n        this._container = container;\r\n        this._options = options || {};\r\n    \r\n        this._container.innerHTML = \r\n            `<table class=\"scanex-school grid\">\r\n                <tr><td class=\"content\"></td></tr>\r\n                <tr><td class=\"footer\"></td></tr>\r\n            </table>`;\r\n    \r\n        this._content = this._container.querySelector('.content');\r\n        this._footer = this._container.querySelector('.footer');\r\n    \r\n        const cks = Object.keys(this._options.columns);\r\n        this._visibleColumns = [];\r\n        this._columns = [];\r\n        for (let i = 0; i < cks.length; ++i) {\r\n            let k = cks[i];\r\n            if (this._options.visibleColumns.indexOf(k) != -1) {\r\n                this._visibleColumns.push(i);\r\n                this._columns.push(this._options.columns[k]);\r\n            }\r\n        }\r\n                    \r\n        const pages = this._options.pages || 1;\r\n        this._onChange = onChange;\r\n    \r\n        this._pager = new Pager(this._footer, {max: pages});\r\n        this._pager.addEventListener('change', this._onChangePage.bind(this));\r\n        this.page = 1;\r\n    }\r\n    get page () {\r\n        return this._pager.current;\r\n    }\r\n    set page (p) {\r\n        this._pager.current = p;        \r\n    }\r\n    _onChangePage ({detail}) {        \r\n        if (typeof (this._onChange) === 'function') {        \r\n            this._render(this._onChange (detail));\r\n        }\r\n    }\r\n    _render (rows) {\r\n        if (Array.isArray(rows) && rows.length > 0) {            \r\n            this._content.innerHTML = `<table>\r\n                <thead>\r\n                    <tr>${this._columns.map(({title}) => `<th>${title}</th>`).join('')}</tr>\r\n                </thead>\r\n                <tbody>\r\n                ${rows.map((row, i) => {\r\n                    return `<tr class=\"${i % 2 === 0 ? 'odd' : 'even'}\">${this._visibleColumns.map(column => {\r\n                        return `<td>${row[column]}</td>`;\r\n                    }).join('')}</tr>`;\r\n                }).join('')}\r\n                </tbody>\r\n            </table>`;\r\n        }\r\n        else {\r\n            this._content.innerHTML = '';\r\n        }\r\n    }\r\n    start() {\r\n        this._pager.start();\r\n    }\r\n    forward () {\r\n        this._pager.forward();\r\n    }\r\n    back () {\r\n        this._pager.back();\r\n    }\r\n    end () {\r\n        this._pager.end();\r\n    }\r\n}\r\n\r\nexport default Grid;","import Grid from './grid/Grid.js';\r\nimport './icons.css';\r\n\r\n// var DB = require ('./db.js');\r\n// var COLUMNS = require('./columns.js');\r\n\r\nwindow.onload = function () {\r\n    const container = document.querySelector('#app');\r\n    const pageSize = 25;\r\n    let options = {        \r\n        visibleColumns: ['VesselID', 'ObservationID', 'IcePassage#', 'RecordMSK', 'RecordUTC'],\r\n        columns: COLUMNS,\r\n        pages: Math.ceil (DB.length / pageSize),\r\n    };        \r\n    new Grid(container, options, index => {\r\n        const start = (index - 1) * pageSize;\r\n        const end = index * pageSize;\r\n        return DB.slice(start, end);\r\n    });\r\n}"],"names":["_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","EventTarget","instance","Constructor","TypeError","_classCallCheck","this","listeners","protoProps","staticProps","value","type","callback","push","addEventListener","stack","l","splice","removeEventListener","event","call","prototype","Pager","constructor","container","options","_container","_options","_max","max","innerHTML","_input","querySelector","choose","bind","buttons","querySelectorAll","start","back","forward","end","_current","c","isNaN","toString","document","createEvent","initEvent","detail","dispatchEvent","current","parseInt","Grid","onChange","_content","_footer","cks","keys","columns","_visibleColumns","_columns","k","visibleColumns","indexOf","pages","_onChange","_pager","_onChangePage","page","p","_render","rows","Array","isArray","map","title","join","row","column","window","onload","COLUMNS","Math","ceil","DB","index","slice"],"mappings":"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"}
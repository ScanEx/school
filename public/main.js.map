{"version":3,"file":"main.js","sources":["../node_modules/scanex-event-target/dist/scanex-event-target.cjs.js","../src/grid/Pager.js","../src/grid/Grid.js","../src/index.js"],"sourcesContent":["'use strict';\r\n\r\nfunction _classCallCheck(instance, Constructor) {\r\n  if (!(instance instanceof Constructor)) {\r\n    throw new TypeError(\"Cannot call a class as a function\");\r\n  }\r\n}\r\n\r\nfunction _defineProperties(target, props) {\r\n  for (var i = 0; i < props.length; i++) {\r\n    var descriptor = props[i];\r\n    descriptor.enumerable = descriptor.enumerable || false;\r\n    descriptor.configurable = true;\r\n    if (\"value\" in descriptor) descriptor.writable = true;\r\n    Object.defineProperty(target, descriptor.key, descriptor);\r\n  }\r\n}\r\n\r\nfunction _createClass(Constructor, protoProps, staticProps) {\r\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n  if (staticProps) _defineProperties(Constructor, staticProps);\r\n  return Constructor;\r\n}\r\n\r\nvar EventTarget =\r\n/*#__PURE__*/\r\nfunction () {\r\n  function EventTarget() {\r\n    _classCallCheck(this, EventTarget);\r\n\r\n    this.listeners = {};\r\n  }\r\n\r\n  _createClass(EventTarget, [{\r\n    key: \"addEventListener\",\r\n    value: function addEventListener(type, callback) {\r\n      if (!(type in this.listeners)) {\r\n        this.listeners[type] = [];\r\n      }\r\n\r\n      this.listeners[type].push(callback);\r\n    }\r\n  }, {\r\n    key: \"on\",\r\n    value: function on(type, callback) {\r\n      this.addEventListener(type, callback);\r\n      return this;\r\n    }\r\n  }, {\r\n    key: \"removeEventListener\",\r\n    value: function removeEventListener(type, callback) {\r\n      if (!(type in this.listeners)) {\r\n        return;\r\n      }\r\n\r\n      var stack = this.listeners[type];\r\n\r\n      for (var i = 0, l = stack.length; i < l; i++) {\r\n        if (stack[i] === callback) {\r\n          stack.splice(i, 1);\r\n          return this.removeEventListener(type, callback);\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: \"off\",\r\n    value: function off(type, callback) {\r\n      this.removeEventListener(type, callback);\r\n      return this;\r\n    }\r\n  }, {\r\n    key: \"dispatchEvent\",\r\n    value: function dispatchEvent(event) {\r\n      if (!(event.type in this.listeners)) {\r\n        return;\r\n      }\r\n\r\n      var stack = this.listeners[event.type];\r\n      Object.defineProperty(event, 'target', {\r\n        enumerable: false,\r\n        configurable: false,\r\n        writable: false,\r\n        value: this\r\n      });\r\n\r\n      for (var i = 0, l = stack.length; i < l; i++) {\r\n        stack[i].call(this, event);\r\n      }\r\n    }\r\n  }]);\r\n\r\n  return EventTarget;\r\n}();\r\n\r\nmodule.exports = EventTarget;\r\n","import EventTarget from 'scanex-event-target';\r\nimport './Pager.css';\r\n\r\nclass Pager extends EventTarget {\r\n    constructor(container, options) {\r\n        super();\r\n        this._container = container;\r\n        this._options = options || {};\r\n        this._max = this._options.max || 1;        \r\n        this._container.innerHTML =\r\n            `<div class=\"pager\">\r\n                <label>1</label>\r\n                <i class=\"icon fast-backward\"></i>\r\n                <i class=\"icon backward\"></i>\r\n                <input class=\"current\" type=\"text\" value=\"\">\r\n                <i class=\"icon forward\"></i>\r\n                <i class=\"icon fast-forward\"></i>\r\n                <label>${this._max}</label>\r\n            </div>`;\r\n        this._input = this._container.querySelector('.current');\r\n        this._input.addEventListener('change', this.choose.bind(this));\r\n\r\n        const buttons = this._container.querySelectorAll('.icon');\r\n        buttons[0].addEventListener('click', this.start.bind(this));\r\n        buttons[1].addEventListener('click', this.back.bind(this));\r\n        buttons[2].addEventListener('click', this.forward.bind(this));\r\n        buttons[3].addEventListener('click', this.end.bind(this));\r\n    }\r\n    get current () {\r\n        return this._current;\r\n    }\r\n    set current (c) {        \r\n        if (!isNaN(c) && 1 <= c && c <= this._max) {\r\n            this._current = c;\r\n            this._input.value = this._current.toString();\r\n            let event = document.createEvent('Event');\r\n            event.initEvent('change', false, false);\r\n            event.detail = this._current;\r\n            this.dispatchEvent(event);\r\n        }\r\n        else {\r\n            this._input.value = this._current.toString();\r\n        }         \r\n    }    \r\n    forward () {        \r\n        this.current += 1;\r\n    }\r\n    back () {\r\n        this.current -= 1;\r\n    }\r\n    start () {\r\n        this.current = 1;        \r\n    }\r\n    end () {\r\n        this.current = this._max;        \r\n    }\r\n    choose () {        \r\n        this.current = parseInt(this._input.value, 10);\r\n    }\r\n}\r\n\r\nexport default Pager;","import Pager from './Pager.js';\r\nimport './Grid.css';\r\nimport EventTarget from 'scanex-event-target';\r\n\r\nclass Grid extends EventTarget {\r\n    constructor(container, options) {\r\n        super();\r\n        this._container = container;\r\n        this._options = options || {};\r\n    \r\n        this._container.innerHTML = \r\n            `<table class=\"scanex-school grid\">\r\n                <tr><td class=\"content\"></td></tr>\r\n                <tr><td class=\"footer\"></td></tr>\r\n            </table>`;\r\n    \r\n        this._content = this._container.querySelector('.content');\r\n        this._footer = this._container.querySelector('.footer');\r\n    \r\n        const cks = Object.keys(this._options.columns);\r\n        this._visibleColumns = [];\r\n        this._columns = [];\r\n        for (let i = 0; i < cks.length; ++i) {\r\n            let k = cks[i];\r\n            if (this._options.visibleColumns.indexOf(k) != -1) {\r\n                this._visibleColumns.push(i);\r\n                this._columns.push(this._options.columns[k]);\r\n            }\r\n        }\r\n\r\n        this._formatters = this._options.formatters || {\r\n            'date': value => {\r\n                const rx = /(?<d>\\d\\d)\\/(?<m>\\d\\d)\\/(?<y>\\d\\d\\d\\d)\\s(?<H>\\d\\d?):(?<M>\\d\\d?)/g;\r\n                const match = rx.exec(value);\r\n                if (match && match.groups) {\r\n                    const y = parseInt(match.groups.y, 10);\r\n                    const m = parseInt(match.groups.m, 10) - 1;\r\n                    const d = parseInt(match.groups.d, 10);\r\n                    const H = parseInt(match.groups.H, 10);\r\n                    const M = parseInt(match.groups.M, 10);\r\n                    const date = new Date(y,m,d,H,M);\r\n                    return date.toLocaleDateString();\r\n                }\r\n                else {\r\n                    return value;\r\n                }                \r\n            }\r\n        };\r\n\r\n        const pages = this._options.pages || 1;\r\n        this._pager = new Pager(this._footer, {max: pages});\r\n        this._pager.addEventListener('change', this._onChangePage.bind(this));        \r\n    }\r\n    _onChangePage ({detail}) {        \r\n        let event = document.createEvent('Event');\r\n        event.initEvent('change', false, false);\r\n        event.detail = detail;\r\n        this.dispatchEvent(event);\r\n    }\r\n    get formatters () {\r\n        return this._formatters;\r\n    }\r\n    set formatters (formatters) {\r\n        this._formatters = formatters;\r\n    }\r\n    get page () {\r\n        return this._pager.current;\r\n    }\r\n    set page (p) {\r\n        this._pager.current = p;        \r\n    }    \r\n    set items (rows) {\r\n        if (Array.isArray(rows) && rows.length > 0) {            \r\n            this._content.innerHTML = `<table>\r\n                <thead>\r\n                    <tr>${this._columns.map(({title}) => `<th>${title}</th>`).join('')}</tr>\r\n                </thead>\r\n                <tbody>\r\n                ${rows.map((row, i) => {\r\n                    return `<tr class=\"${i % 2 === 0 ? 'odd' : 'even'}\">${this._visibleColumns.map((k,j) => {\r\n                        const {type} = this._columns[j];\r\n                        const f = this._formatters[type];\r\n                        return `<td>${f ? f (row[k]) : row[k]}</td>`;\r\n                    }).join('')}</tr>`;\r\n                }).join('')}\r\n                </tbody>\r\n            </table>`;\r\n        }\r\n        else {\r\n            this._content.innerHTML = '';\r\n        }\r\n    }\r\n    start() {\r\n        this._pager.start();\r\n    }\r\n    forward () {\r\n        this._pager.forward();\r\n    }\r\n    back () {\r\n        this._pager.back();\r\n    }\r\n    end () {\r\n        this._pager.end();\r\n    }\r\n}\r\n\r\nexport default Grid;","import Grid from './grid/Grid.js';\r\nimport './icons.css';\r\n\r\nwindow.onload = function () {\r\n    const container = document.querySelector('#app');\r\n    const pageSize = 20;\r\n    let options = {        \r\n        visibleColumns: ['VesselID', 'ObservationID', 'IcePassage#', 'RecordMSK', 'RecordUTC', 'Visibility'],\r\n        columns: COLUMNS,\r\n        pages: Math.ceil (DB.length / pageSize),\r\n    };\r\n    const grid = new Grid(container, options);\r\n    grid.addEventListener('change', ({detail}) => {\r\n        const start = (detail - 1) * pageSize;\r\n        const end = detail * pageSize;\r\n        grid.items = DB.slice(start, end);\r\n    });\r\n    grid.start();\r\n}"],"names":["Pager","EventTarget","constructor","container","options","_container","_options","_max","max","innerHTML","_input","querySelector","addEventListener","choose","bind","buttons","querySelectorAll","start","back","forward","end","current","_current","c","isNaN","value","toString","event","document","createEvent","initEvent","detail","dispatchEvent","parseInt","Grid","_content","_footer","cks","Object","keys","columns","_visibleColumns","_columns","i","length","k","visibleColumns","indexOf","push","_formatters","formatters","rx","match","exec","groups","y","m","d","H","M","date","Date","toLocaleDateString","pages","_pager","_onChangePage","page","p","items","rows","Array","isArray","map","title","join","row","j","type","f","window","onload","pageSize","COLUMNS","Math","ceil","DB","grid","slice"],"mappings":"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"}